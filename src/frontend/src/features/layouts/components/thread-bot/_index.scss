@use "../../../../styles/utils" as *;
@use "../../../../styles/cunningham-tokens" as tokens;

.thread-bot {
    background-color: var(--c--theme--colors--greyscale-050);
    display: flex;
    flex-direction: column;
    max-height: 100%;
    font-family: var(--c--theme--font--families--base);
    
    // Enhanced markdown support for chatbot messages
    .thread-bot__message {
        &--bot {
            .markdown-content {
                // Headers using design system typography
                h1, h2, h3, h4, h5, h6 {
                    margin: var(--c--theme--spacings--sm) 0;
                    font-family: var(--c--theme--font--families--accent);
                    font-weight: var(--c--theme--font--weights--bold);
                    color: var(--c--theme--colors--primary-800);
                    line-height: 1.3;
                }
                
                h1 {
                    font-size: var(--c--theme--font--sizes--h1);
                    border-bottom: 2px solid var(--c--theme--colors--primary-400);
                    padding-bottom: var(--c--theme--spacings--xs);
                }
                
                h2 {
                    font-size: var(--c--theme--font--sizes--h2);
                    border-bottom: 1px solid var(--c--theme--colors--greyscale-300);
                    padding-bottom: var(--c--theme--spacings--4xs);
                }
                
                h3 {
                    font-size: var(--c--theme--font--sizes--h3);
                    color: var(--c--theme--colors--primary-700);
                }
                
                // Code blocks using design system colors
                code {
                    background-color: var(--c--theme--colors--greyscale-100);
                    color: var(--c--theme--colors--info-600);
                    padding: var(--c--theme--spacings--4xs) var(--c--theme--spacings--xs);
                    border-radius: var(--c--theme--spacings--4xs);
                    font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
                    font-size: var(--c--theme--font--sizes--sm);
                    border: 1px solid var(--c--theme--colors--greyscale-200);
                }
                
                pre {
                    background-color: var(--c--theme--colors--greyscale-050);
                    padding: var(--c--theme--spacings--base);
                    border-radius: var(--c--theme--spacings--xs);
                    overflow-x: auto;
                    margin: var(--c--theme--spacings--sm) 0;
                    border: 1px solid var(--c--theme--colors--greyscale-200);
                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                    
                    code {
                        background: none;
                        padding: 0;
                        border: none;
                        color: var(--c--theme--colors--greyscale-700);
                    }
                }
                
                // Lists with proper spacing
                ul, ol {
                    padding-left: var(--c--theme--spacings--md);
                    margin: var(--c--theme--spacings--sm) 0;
                    
                    li {
                        margin: var(--c--theme--spacings--xs) 0;
                        line-height: 1.6;
                    }
                }
                
                // Blockquotes with accent colors
                blockquote {
                    border-left: 4px solid var(--c--theme--colors--info-400);
                    margin: var(--c--theme--spacings--sm) 0;
                    padding-left: var(--c--theme--spacings--base);
                    color: var(--c--theme--colors--greyscale-600);
                    font-style: italic;
                    background-color: var(--c--theme--colors--info-100);
                    padding: var(--c--theme--spacings--sm) var(--c--theme--spacings--base);
                    border-radius: var(--c--theme--spacings--4xs);
                }
                
                // Horizontal rules
                hr {
                    border: none;
                    border-top: 2px solid var(--c--theme--colors--greyscale-300);
                    margin: var(--c--theme--spacings--base) 0;
                }
                
                // Strong and emphasis
                strong {
                    font-weight: var(--c--theme--font--weights--bold);
                    color: var(--c--theme--colors--primary-800);
                }
                
                em {
                    font-style: italic;
                    color: var(--c--theme--colors--greyscale-700);
                }
                
                // Paragraphs
                p {
                    margin: var(--c--theme--spacings--sm) 0;
                    line-height: 1.6;
                    color: var(--c--theme--colors--greyscale-text);
                }
            }
            
            // Message type specific styling
            &.email-summary {
                .markdown-content {
                    h1, h2, h3 { color: var(--c--theme--colors--success-600); }
                    code { 
                        background-color: var(--c--theme--colors--success-100);
                        color: var(--c--theme--colors--success-700);
                        border-color: var(--c--theme--colors--success-200);
                    }
                }
            }
            
            &.email-reply {
                .markdown-content {
                    h1, h2, h3 { color: var(--c--theme--colors--info-600); }
                    code { 
                        background-color: var(--c--theme--colors--info-100);
                        color: var(--c--theme--colors--info-700);
                        border-color: var(--c--theme--colors--info-200);
                    }
                }
            }
            
            &.function-call {
                .markdown-content {
                    h1, h2, h3 { color: var(--c--theme--colors--purple-500); }
                    code { 
                        background-color: var(--c--theme--colors--primary-100);
                        color: var(--c--theme--colors--primary-700);
                        border-color: var(--c--theme--colors--primary-200);
                    }
                }
            }
            
            &.multi-step {
                .markdown-content {
                    h1, h2, h3 { color: var(--c--theme--colors--success-600); }
                    code { 
                        background-color: var(--c--theme--colors--success-100);
                        color: var(--c--theme--colors--success-700);
                        border-color: var(--c--theme--colors--success-200);
                    }
                }
            }
            
            &.error {
                .markdown-content {
                    h1, h2, h3 { color: var(--c--theme--colors--danger-500); }
                    code { 
                        background-color: var(--c--theme--colors--danger-100);
                        color: var(--c--theme--colors--danger-600);
                        border-color: var(--c--theme--colors--danger-200);
                    }
                }
            }
        }
    }
}

@media screen and (max-width: breakpoint(tablet)) {
    .thread-bot {
        position: fixed;
        top: var(--header-height);
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 900;
    }
}

.thread-bot--loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--c--theme--colors--greyscale-600);
    font-size: var(--c--theme--font--sizes--md);
}

.thread-bot__messages-list {
    display: flex;
    flex-direction: column;
    gap: var(--c--theme--spacings--base);
    padding: var(--c--theme--spacings--base);
    overflow-y: auto;
    max-height: 100%;
    
    // Enhanced message spacing and animation
    .thread-bot__message {
        transition: all var(--c--theme--transitions--duration) var(--c--theme--transitions--ease-out);
        
        &:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
    }
}

.thread-bot__trashed-banner__content {
    display: flex;
    flex-direction: row;
    gap: var(--c--theme--spacings--base);
    justify-content: space-between;
    width: 100%;
    background-color: var(--c--theme--colors--warning-100);
    border: 1px solid var(--c--theme--colors--warning-300);
    border-radius: var(--c--theme--spacings--xs);
    padding: var(--c--theme--spacings--sm);
    color: var(--c--theme--colors--warning-text);
}

.thread-bot__trashed-banner__actions {
    display: flex;
    gap: var(--c--theme--spacings--sm);
    
    button {
        background-color: var(--c--theme--colors--warning-500);
        color: var(--c--theme--colors--warning-text);
        border: none;
        border-radius: var(--c--theme--spacings--4xs);
        padding: var(--c--theme--spacings--xs) var(--c--theme--spacings--sm);
        font-size: var(--c--theme--font--sizes--sm);
        font-weight: var(--c--theme--font--weights--medium);
        cursor: pointer;
        transition: all var(--c--theme--transitions--duration) var(--c--theme--transitions--ease-out);
        
        &:hover {
            background-color: var(--c--theme--colors--warning-600);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        &:active {
            transform: translateY(0);
        }
    }
}